<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"  [ ]>

<chapter id="jpa-inheritance-mixed">
    <title>Mixed Inheritance Strategies</title>
        
        
    <section id="jpa-inheritance-mixed-question">
        <title>Which Strategy Gets Used for Subclass?</title>
        <figure>
            <title>Mixed Inheritance Strategy</title>
            <graphic scalefit="1" fileref="images/jpa-inheritance-mixed.png"/>
        </figure>
    </section>

    <section id="jpa-inheritance-mixed-schema">
        <title>Generated Database Schema</title>
        <figure>
            <title>Generated Database Schema</title>
<programlisting language=""><![CDATA[create table ORMINH_SHAPE (
    id bigint generated by default as identity,
    version bigint not null,
    posx integer not null,
    posy integer not null,
    primary key (id)
)
create table ORMINH_CIRCLE (
    radius integer not null,
    id bigint not null,
    primary key (id)
)
create table ORMINH_RECTANGLE (
    height integer not null,
    width integer not null,
    id bigint not null,
    primary key (id)
)
alter table ORMINH_CIRCLE 
    add constraint FKFF2F1F1632C97600 
    foreign key (id) 
    references ORMINH_SHAPE
alter table ORMINH_RECTANGLE 
    add constraint FK1FFF614932C97600 
    foreign key (id) 
    references ORMINH_SHAPE]]></programlisting>                        

<programlisting language=""><![CDATA[create table ORMINH_CUBE (
    depth integer not null,
    id bigint not null,
    primary key (id)
)
alter table ORMINH_CUBE 
    add constraint FK84203FB112391CE 
    foreign key (id) 
    references ORMINH_RECTANGLE]]></programlisting>                        
        </figure>
        <itemizedlist spacing="compact">
            <listitem><para>Provider used parent's JOIN strategy over child's TABLE_PER_CLASS specification</para></listitem>
        </itemizedlist>
        
    </section>
        
    <section id="jpa-inheritance-mixed-summary">
        <title>Summary</title>
        <itemizedlist spacing="compact">
            <listitem><para>Provider behavior undefined by spec</para></listitem>
            <listitem><para>Leverage DAOs to bridge the mis-match between legacy DB schema and Java class model</para></listitem>
        </itemizedlist>
    </section>
</chapter>
  
